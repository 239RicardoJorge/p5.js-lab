<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>p5.js playground</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app">
        <!-- DEBUG: Error Handler -->
        <div id="debug-overlay"
            style="position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); color:red; font-family:monospace; padding:20px; box-sizing:border-box; z-index:9999; display:none; pointer-events:none; white-space:pre-wrap; overflow:auto;">
        </div>
        <script>
            window.onerror = function (msg, url, line, col, error) {
                const overlay = document.getElementById('debug-overlay');
                overlay.style.display = 'block';
                overlay.style.pointerEvents = 'auto'; // allow selection
                overlay.innerText += `Error: ${msg}\nAt: ${url}:${line}:${col}\nStack: ${error ? error.stack : 'N/A'}\n\n`;
                return false;
            };
            window.addEventListener('unhandledrejection', function (event) {
                const overlay = document.getElementById('debug-overlay');
                overlay.style.display = 'block';
                overlay.style.pointerEvents = 'auto';
                overlay.innerText += `Unhandled Rejection: ${event.reason}\n\n`;
            });
        </script>
        <!-- Sidebar -->
        <aside class="sidebar">
            <header class="brand">
                <div class="brand-mark">◈</div>
                <div class="brand-text">
                    <span class="brand-name">p5.js playground</span>
                </div>
            </header>

            <div class="sidebar-content">
                <!-- Shape Selector -->
                <section class="section">
                    <h3 class="section-title">FORMA</h3>
                    <div class="shape-selector">
                        <button class="shape-btn active" data-shape="lines" title="Linhas">
                            <svg viewBox="0 0 24 24">
                                <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2" />
                            </svg>
                        </button>
                        <button class="shape-btn" data-shape="circles" title="Círculos">
                            <svg viewBox="0 0 24 24">
                                <circle cx="12" cy="12" r="7" fill="none" stroke="currentColor" stroke-width="2" />
                            </svg>
                        </button>
                    </div>
                </section>

                <!-- Grid Layout -->
                <section class="section">
                    <h3 class="section-title resetable" data-reset="grid">ESPAÇAMENTO</h3>
                    <div class="control-row">
                        <label class="control-label">Cols (X)</label>
                        <input type="number" class="value-input" id="colsValue" value="10" min="1" max="100">
                    </div>
                    <input type="range" class="slider" id="colsSlider" min="1" max="100" value="10">

                    <div class="control-row" style="margin-top: 10px;">
                        <label class="control-label">Rows (Y)</label>
                        <input type="number" class="value-input" id="rowsValue" value="10" min="1" max="100">
                    </div>
                    <input type="range" class="slider" id="rowsSlider" min="1" max="100" value="10">
                </section>


                <!-- Rotation (Individual) -->
                <section class="section">
                    <div class="attr-header">
                        <h3 class="section-title resetable" data-reset="rotation">ROTAÇÃO</h3>
                        <div class="axis-toggle-multi" data-param="rotation">
                            <button class="axis-btn-multi active" data-axis="x" title="Toggle X axis">X</button>
                            <button class="axis-btn-multi" data-axis="y" title="Toggle Y axis">Y</button>
                        </div>
                    </div>
                    <!-- Rotation X -->
                    <div class="axis-panel" id="rotationXPanel" data-axis="x">
                        <div class="axis-panel-header">
                            <span class="axis-label x">X</span>
                            <div class="axis-values-preview">
                                <span class="preview-value" id="rotationXPreviewStart">0°</span>
                                <span class="preview-arrow">→</span>
                                <span class="preview-value" id="rotationXPreviewEnd">0°</span>
                            </div>
                        </div>
                        <div class="axis-panel-content">
                            <div class="range-control">
                                <div class="range-inputs">
                                    <input type="number" class="value-input start" id="rotationXStart" value="0"
                                        min="-360" max="360">
                                    <div class="dual-slider large inline">
                                        <input type="range" class="slider-track-input" id="rotationXSliderStart"
                                            min="-360" max="360" value="0">
                                        <input type="range" class="slider-track-input" id="rotationXSliderEnd"
                                            min="-360" max="360" value="0">
                                        <div class="slider-track"></div>
                                        <div class="slider-range" id="rotationXRange"></div>
                                    </div>
                                    <input type="number" class="value-input end" id="rotationXEnd" value="0" min="-360"
                                        max="360">
                                </div>
                            </div>
                            <div class="advanced-controls-visible">
                                <div class="advanced-row">
                                    <div class="control-group fade-group">
                                        <span class="label">Fade</span>
                                        <div class="dual-slider-mini">
                                            <input type="range" class="pos-slider-dual" id="rotationXFadeStart" min="0"
                                                max="100" value="0">
                                            <input type="range" class="pos-slider-dual" id="rotationXFadeEnd" min="0"
                                                max="100" value="100">
                                            <div class="slider-track"></div>
                                            <div class="slider-range" id="rotationXFadeRange"></div>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Steps</span>
                                        <input type="number" class="steps-input" id="rotationXSteps" value="10" min="1"
                                            max="100">
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Mult</span>
                                        <input type="number" class="mult-input" id="rotationXMult" value="1" step="0.1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Rotation Y -->
                    <div class="axis-panel hidden" id="rotationYPanel" data-axis="y">
                        <div class="axis-panel-header">
                            <span class="axis-label y">Y</span>
                            <div class="axis-values-preview">
                                <span class="preview-value" id="rotationYPreviewStart">0°</span>
                                <span class="preview-arrow">→</span>
                                <span class="preview-value" id="rotationYPreviewEnd">0°</span>
                            </div>
                        </div>
                        <div class="axis-panel-content">
                            <div class="range-control">
                                <div class="range-inputs">
                                    <input type="number" class="value-input start" id="rotationYStart" value="0"
                                        min="-360" max="360">
                                    <div class="dual-slider large inline">
                                        <input type="range" class="slider-track-input" id="rotationYSliderStart"
                                            min="-360" max="360" value="0">
                                        <input type="range" class="slider-track-input" id="rotationYSliderEnd"
                                            min="-360" max="360" value="0">
                                        <div class="slider-track"></div>
                                        <div class="slider-range" id="rotationYRange"></div>
                                    </div>
                                    <input type="number" class="value-input end" id="rotationYEnd" value="0" min="-360"
                                        max="360">
                                </div>
                            </div>
                            <div class="advanced-controls-visible">
                                <div class="advanced-row">
                                    <div class="control-group fade-group">
                                        <span class="label">Fade</span>
                                        <div class="dual-slider-mini">
                                            <input type="range" class="pos-slider-dual" id="rotationYFadeStart" min="0"
                                                max="100" value="0">
                                            <input type="range" class="pos-slider-dual" id="rotationYFadeEnd" min="0"
                                                max="100" value="100">
                                            <div class="slider-track"></div>
                                            <div class="slider-range" id="rotationYFadeRange"></div>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Steps</span>
                                        <input type="number" class="steps-input" id="rotationYSteps" value="10" min="1"
                                            max="100">
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Mult</span>
                                        <input type="number" class="mult-input" id="rotationYMult" value="1" step="0.1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Thickness (Weight) -->
                <section class="section">
                    <div class="attr-header">
                        <h3 class="section-title resetable" data-reset="weight">ESPESSURA</h3>
                        <div class="axis-toggle-multi" data-param="weight">
                            <button class="axis-btn-multi active" data-axis="x" title="Toggle X axis">X</button>
                            <button class="axis-btn-multi" data-axis="y" title="Toggle Y axis">Y</button>
                        </div>
                    </div>
                    <!-- Weight X -->
                    <div class="axis-panel" id="weightXPanel" data-axis="x">
                        <div class="axis-panel-header">
                            <span class="axis-label x">X</span>
                            <div class="axis-values-preview">
                                <span class="preview-value" id="weightXPreviewStart">2</span>
                                <span class="preview-arrow">→</span>
                                <span class="preview-value" id="weightXPreviewEnd">2</span>
                            </div>
                        </div>
                        <div class="axis-panel-content">
                            <div class="range-control">
                                <div class="range-inputs">
                                    <input type="number" class="value-input start" id="weightXStart" value="2"
                                        step="0.5" min="0.5" max="50">
                                    <div class="dual-slider large inline">
                                        <input type="range" class="slider-track-input" id="weightXSliderStart" min="0.5"
                                            max="50" step="0.5" value="2">
                                        <input type="range" class="slider-track-input" id="weightXSliderEnd" min="0.5"
                                            max="50" step="0.5" value="2">
                                        <div class="slider-track"></div>
                                        <div class="slider-range" id="weightXRange"></div>
                                    </div>
                                    <input type="number" class="value-input end" id="weightXEnd" value="2" step="0.5"
                                        min="0.5" max="50">
                                </div>
                            </div>
                            <div class="advanced-controls-visible">
                                <div class="advanced-row">
                                    <div class="control-group fade-group">
                                        <span class="label">Fade</span>
                                        <div class="dual-slider-mini">
                                            <input type="range" class="pos-slider-dual" id="weightXFadeStart" min="0"
                                                max="100" value="0">
                                            <input type="range" class="pos-slider-dual" id="weightXFadeEnd" min="0"
                                                max="100" value="100">
                                            <div class="slider-track"></div>
                                            <div class="slider-range" id="weightXFadeRange"></div>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Steps</span>
                                        <input type="number" class="steps-input" id="weightXSteps" value="10" min="1"
                                            max="100">
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Mult</span>
                                        <input type="number" class="mult-input" id="weightXMult" value="1" step="0.1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Weight Y -->
                    <div class="axis-panel hidden" id="weightYPanel" data-axis="y">
                        <div class="axis-panel-header">
                            <span class="axis-label y">Y</span>
                            <div class="axis-values-preview">
                                <span class="preview-value" id="weightYPreviewStart">2</span>
                                <span class="preview-arrow">→</span>
                                <span class="preview-value" id="weightYPreviewEnd">2</span>
                            </div>
                        </div>
                        <div class="axis-panel-content">
                            <div class="range-control">
                                <div class="range-inputs">
                                    <input type="number" class="value-input start" id="weightYStart" value="2"
                                        step="0.5" min="0.5" max="50">
                                    <div class="dual-slider large inline">
                                        <input type="range" class="slider-track-input" id="weightYSliderStart" min="0.5"
                                            max="50" step="0.5" value="2">
                                        <input type="range" class="slider-track-input" id="weightYSliderEnd" min="0.5"
                                            max="50" step="0.5" value="2">
                                        <div class="slider-track"></div>
                                        <div class="slider-range" id="weightYRange"></div>
                                    </div>
                                    <input type="number" class="value-input end" id="weightYEnd" value="2" step="0.5"
                                        min="0.5" max="50">
                                </div>
                            </div>
                            <div class="advanced-controls-visible">
                                <div class="advanced-row">
                                    <div class="control-group fade-group">
                                        <span class="label">Fade</span>
                                        <div class="dual-slider-mini">
                                            <input type="range" class="pos-slider-dual" id="weightYFadeStart" min="0"
                                                max="100" value="0">
                                            <input type="range" class="pos-slider-dual" id="weightYFadeEnd" min="0"
                                                max="100" value="100">
                                            <div class="slider-track"></div>
                                            <div class="slider-range" id="weightYFadeRange"></div>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Steps</span>
                                        <input type="number" class="steps-input" id="weightYSteps" value="10" min="1"
                                            max="100">
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Mult</span>
                                        <input type="number" class="mult-input" id="weightYMult" value="1" step="0.1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Length -->
                <section class="section">
                    <div class="attr-header">
                        <h3 class="section-title resetable" data-reset="length">COMPRIMENTO</h3>
                        <div class="axis-toggle-multi" data-param="length">
                            <button class="axis-btn-multi active" data-axis="x" title="Toggle X axis">X</button>
                            <button class="axis-btn-multi" data-axis="y" title="Toggle Y axis">Y</button>
                        </div>
                    </div>
                    <!-- Length X -->
                    <div class="axis-panel" id="lengthXPanel" data-axis="x">
                        <div class="axis-panel-header">
                            <span class="axis-label x">X</span>
                            <div class="axis-values-preview">
                                <span class="preview-value" id="lengthXPreviewStart">100%</span>
                                <span class="preview-arrow">→</span>
                                <span class="preview-value" id="lengthXPreviewEnd">100%</span>
                            </div>
                        </div>
                        <div class="axis-panel-content">
                            <div class="range-control">
                                <div class="range-inputs">
                                    <input type="number" class="value-input start" id="lengthXStart" value="100" min="0"
                                        max="100">
                                    <div class="dual-slider large inline">
                                        <input type="range" class="slider-track-input" id="lengthXSliderStart" min="0"
                                            max="100" value="100">
                                        <input type="range" class="slider-track-input" id="lengthXSliderEnd" min="0"
                                            max="100" value="100">
                                        <div class="slider-track"></div>
                                        <div class="slider-range" id="lengthXRange"></div>
                                    </div>
                                    <input type="number" class="value-input end" id="lengthXEnd" value="100" min="0"
                                        max="100">
                                </div>
                            </div>
                            <div class="advanced-controls-visible">
                                <div class="advanced-row">
                                    <div class="control-group fade-group">
                                        <span class="label">Fade</span>
                                        <div class="dual-slider-mini">
                                            <input type="range" class="pos-slider-dual" id="lengthXFadeStart" min="0"
                                                max="100" value="0">
                                            <input type="range" class="pos-slider-dual" id="lengthXFadeEnd" min="0"
                                                max="100" value="100">
                                            <div class="slider-track"></div>
                                            <div class="slider-range" id="lengthXFadeRange"></div>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Steps</span>
                                        <input type="number" class="steps-input" id="lengthXSteps" value="10" min="1"
                                            max="100">
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Mult</span>
                                        <input type="number" class="mult-input" id="lengthXMult" value="1" step="0.1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Length Y -->
                    <div class="axis-panel hidden" id="lengthYPanel" data-axis="y">
                        <div class="axis-panel-header">
                            <span class="axis-label y">Y</span>
                            <div class="axis-values-preview">
                                <span class="preview-value" id="lengthYPreviewStart">100%</span>
                                <span class="preview-arrow">→</span>
                                <span class="preview-value" id="lengthYPreviewEnd">100%</span>
                            </div>
                        </div>
                        <div class="axis-panel-content">
                            <div class="range-control">
                                <div class="range-inputs">
                                    <input type="number" class="value-input start" id="lengthYStart" value="100" min="0"
                                        max="100">
                                    <div class="dual-slider large inline">
                                        <input type="range" class="slider-track-input" id="lengthYSliderStart" min="0"
                                            max="100" value="100">
                                        <input type="range" class="slider-track-input" id="lengthYSliderEnd" min="0"
                                            max="100" value="100">
                                        <div class="slider-track"></div>
                                        <div class="slider-range" id="lengthYRange"></div>
                                    </div>
                                    <input type="number" class="value-input end" id="lengthYEnd" value="100" min="0"
                                        max="100">
                                </div>
                            </div>
                            <div class="advanced-controls-visible">
                                <div class="advanced-row">
                                    <div class="control-group fade-group">
                                        <span class="label">Fade</span>
                                        <div class="dual-slider-mini">
                                            <input type="range" class="pos-slider-dual" id="lengthYFadeStart" min="0"
                                                max="100" value="0">
                                            <input type="range" class="pos-slider-dual" id="lengthYFadeEnd" min="0"
                                                max="100" value="100">
                                            <div class="slider-track"></div>
                                            <div class="slider-range" id="lengthYFadeRange"></div>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Steps</span>
                                        <input type="number" class="steps-input" id="lengthYSteps" value="10" min="1"
                                            max="100">
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Mult</span>
                                        <input type="number" class="mult-input" id="lengthYMult" value="1" step="0.1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Opacity -->
                <section class="section">
                    <div class="attr-header">
                        <h3 class="section-title resetable" data-reset="opacity">OPACIDADE</h3>
                        <div class="axis-toggle-multi" data-param="opacity">
                            <button class="axis-btn-multi active" data-axis="x" title="Toggle X axis">X</button>
                            <button class="axis-btn-multi" data-axis="y" title="Toggle Y axis">Y</button>
                        </div>
                    </div>
                    <!-- Opacity X -->
                    <div class="axis-panel" id="opacityXPanel" data-axis="x">
                        <div class="axis-panel-header">
                            <span class="axis-label x">X</span>
                            <div class="axis-values-preview">
                                <span class="preview-value" id="opacityXPreviewStart">100%</span>
                                <span class="preview-arrow">→</span>
                                <span class="preview-value" id="opacityXPreviewEnd">100%</span>
                            </div>
                        </div>
                        <div class="axis-panel-content">
                            <div class="range-control">
                                <div class="range-inputs">
                                    <input type="number" class="value-input start" id="opacityXStart" value="100"
                                        min="0" max="100">
                                    <div class="dual-slider large inline">
                                        <input type="range" class="slider-track-input" id="opacityXSliderStart" min="0"
                                            max="100" value="100">
                                        <input type="range" class="slider-track-input" id="opacityXSliderEnd" min="0"
                                            max="100" value="100">
                                        <div class="slider-track"></div>
                                        <div class="slider-range" id="opacityXRange"></div>
                                    </div>
                                    <input type="number" class="value-input end" id="opacityXEnd" value="100" min="0"
                                        max="100">
                                </div>
                            </div>
                            <div class="advanced-controls-visible">
                                <div class="advanced-row">
                                    <div class="control-group fade-group">
                                        <span class="label">Fade</span>
                                        <div class="dual-slider-mini">
                                            <input type="range" class="pos-slider-dual" id="opacityXFadeStart" min="0"
                                                max="100" value="0">
                                            <input type="range" class="pos-slider-dual" id="opacityXFadeEnd" min="0"
                                                max="100" value="100">
                                            <div class="slider-track"></div>
                                            <div class="slider-range" id="opacityXFadeRange"></div>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Steps</span>
                                        <input type="number" class="steps-input" id="opacityXSteps" value="10" min="1"
                                            max="100">
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Mult</span>
                                        <input type="number" class="mult-input" id="opacityXMult" value="1" step="0.1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Opacity Y -->
                    <div class="axis-panel hidden" id="opacityYPanel" data-axis="y">
                        <div class="axis-panel-header">
                            <span class="axis-label y">Y</span>
                            <div class="axis-values-preview">
                                <span class="preview-value" id="opacityYPreviewStart">100%</span>
                                <span class="preview-arrow">→</span>
                                <span class="preview-value" id="opacityYPreviewEnd">100%</span>
                            </div>
                        </div>
                        <div class="axis-panel-content">
                            <div class="range-control">
                                <div class="range-inputs">
                                    <input type="number" class="value-input start" id="opacityYStart" value="100"
                                        min="0" max="100">
                                    <div class="dual-slider large inline">
                                        <input type="range" class="slider-track-input" id="opacityYSliderStart" min="0"
                                            max="100" value="100">
                                        <input type="range" class="slider-track-input" id="opacityYSliderEnd" min="0"
                                            max="100" value="100">
                                        <div class="slider-track"></div>
                                        <div class="slider-range" id="opacityYRange"></div>
                                    </div>
                                    <input type="number" class="value-input end" id="opacityYEnd" value="100" min="0"
                                        max="100">
                                </div>
                            </div>
                            <div class="advanced-controls-visible">
                                <div class="advanced-row">
                                    <div class="control-group fade-group">
                                        <span class="label">Fade</span>
                                        <div class="dual-slider-mini">
                                            <input type="range" class="pos-slider-dual" id="opacityYFadeStart" min="0"
                                                max="100" value="0">
                                            <input type="range" class="pos-slider-dual" id="opacityYFadeEnd" min="0"
                                                max="100" value="100">
                                            <div class="slider-track"></div>
                                            <div class="slider-range" id="opacityYFadeRange"></div>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Steps</span>
                                        <input type="number" class="steps-input" id="opacityYSteps" value="10" min="1"
                                            max="100">
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Mult</span>
                                        <input type="number" class="mult-input" id="opacityYMult" value="1" step="0.1">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Color -->
                <section class="section">
                    <div class="attr-header">
                        <h3 class="section-title resetable" data-reset="color">COR</h3>
                        <div class="axis-toggle-multi" id="colorAxisToggle" data-param="color">
                            <button class="axis-btn-multi active" data-axis="x" title="Toggle X axis">X</button>
                            <button class="axis-btn-multi" data-axis="y" title="Toggle Y axis">Y</button>
                        </div>
                    </div>

                    <!-- Color X Panel -->
                    <div class="axis-panel" id="colorXPanel" data-axis="x">
                        <div class="axis-panel-header">
                            <span class="axis-label x">X</span>
                        </div>
                        <div class="axis-panel-content">
                            <div class="color-stops-container" id="colorStopsContainerX">
                                <div class="color-stops" id="colorStopsX"></div>
                                <button class="add-stop-btn" id="addColorStopX" title="Adicionar cor">+</button>
                            </div>
                            <div class="gradient-preview" id="colorGradientPreviewX"></div>
                            <div class="color-fade-controls" id="colorFadeControlsX">
                                <div class="advanced-row">
                                    <div class="control-group fade-group">
                                        <span class="label">Fade</span>
                                        <div class="dual-slider-mini">
                                            <input type="range" class="pos-slider-dual" id="colorXFadeStart" min="0"
                                                max="100" value="0">
                                            <input type="range" class="pos-slider-dual" id="colorXFadeEnd" min="0"
                                                max="100" value="100">
                                            <div class="slider-track"></div>
                                            <div class="slider-range" id="colorXFadeRange"></div>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Steps</span>
                                        <input type="number" class="steps-input" id="colorXSteps" value="100" min="1"
                                            max="100">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Color Y Panel -->
                    <div class="axis-panel hidden" id="colorYPanel" data-axis="y">
                        <div class="axis-panel-header">
                            <span class="axis-label y">Y</span>
                        </div>
                        <div class="axis-panel-content">
                            <div class="color-stops-container" id="colorStopsContainerY">
                                <div class="color-stops" id="colorStopsY"></div>
                                <button class="add-stop-btn" id="addColorStopY" title="Adicionar cor">+</button>
                            </div>
                            <div class="gradient-preview" id="colorGradientPreviewY"></div>
                            <div class="color-fade-controls" id="colorFadeControlsY">
                                <div class="advanced-row">
                                    <div class="control-group fade-group">
                                        <span class="label">Fade</span>
                                        <div class="dual-slider-mini">
                                            <input type="range" class="pos-slider-dual" id="colorYFadeStart" min="0"
                                                max="100" value="0">
                                            <input type="range" class="pos-slider-dual" id="colorYFadeEnd" min="0"
                                                max="100" value="100">
                                            <div class="slider-track"></div>
                                            <div class="slider-range" id="colorYFadeRange"></div>
                                        </div>
                                    </div>
                                    <div class="control-group">
                                        <span class="label">Steps</span>
                                        <input type="number" class="steps-input" id="colorYSteps" value="100" min="1"
                                            max="100">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Color Presets -->
                    <div class="presets-section">
                        <div class="presets-header">
                            <span class="presets-label">Presets</span>
                            <button class="save-preset-btn" id="saveColorPreset" title="Guardar preset">
                                <svg viewBox="0 0 16 16" width="10" height="10">
                                    <path d="M8 1v11M4 8l4 4 4-4" stroke="currentColor" stroke-width="2" fill="none"
                                        stroke-linecap="round" />
                                </svg>
                            </button>
                        </div>
                        <div class="color-presets" id="colorPresets"></div>
                    </div>
                </section>
            </div>
        </aside>

        <!-- Main Canvas Area -->
        <main class="canvas-container">
            <div class="toolbar">
                <div class="toolbar-left">
                    <div class="resolution-control">
                        <span>RES:</span>
                        <input type="number" class="res-input" id="resWidth" value="800">
                        <span>×</span>
                        <input type="number" class="res-input" id="resHeight" value="800">
                        <button class="res-apply" id="resApply" title="Aplicar Resolução">⏎</button>
                    </div>
                </div>
                <div class="toolbar-right">
                    <button class="tool-btn" id="resetBtn" title="Reset Tudo">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-8 3.58-8 8s3.58 8 8 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                                fill="currentColor" />
                        </svg>
                    </button>
                    <button class="tool-btn" id="randomBtn" title="Randomizar">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"
                                fill="currentColor" />
                        </svg>
                    </button>
                    <div style="width: 1px; height: 16px; background: var(--border); margin: 0 4px;"></div>
                    <label class="tool-btn" title="Carregar JSON">
                        <svg viewBox="0 0 24 24">
                            <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z" fill="currentColor" />
                        </svg>
                        <input type="file" id="loadJson" accept=".json" style="display: none;">
                    </label>
                    <button class="tool-btn" id="saveJson" title="Guardar JSON">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M17 3H5c-1.11 0-2 .9-2 2v14c-1.1 0-2 .9-2 2h18c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"
                                fill="currentColor" />
                        </svg>
                    </button>
                    <button class="tool-btn export" id="exportPng" title="Exportar PNG">PNG</button>
                </div>
            </div>

            <div id="canvasWrapper">
                <div id="canvas"></div>
            </div>
        </main>

        <!-- Right Panel -->
        <aside class="right-panel">
            <div class="right-panel-content">
                <!-- 3D Rotation -->
                <section class="section">
                    <h3 class="section-title">ROTAÇÃO 3D</h3>

                    <div class="control-row">
                        <label class="control-label">
                            <span class="resetable" data-reset="rotX">X</span>
                            <input type="number" class="value-input-small" id="rotXValue" value="0" min="-90" max="90">
                        </label>
                        <input type="range" class="slider" id="rotX" min="-90" max="90" value="0">
                    </div>

                    <div class="control-row">
                        <label class="control-label">
                            <span class="resetable" data-reset="rotY">Y</span>
                            <input type="number" class="value-input-small" id="rotYValue" value="0" min="-90" max="90">
                        </label>
                        <input type="range" class="slider" id="rotY" min="-90" max="90" value="0">
                    </div>

                    <div class="control-row">
                        <label class="control-label">
                            <span class="resetable" data-reset="rotZ">Z</span>
                            <input type="number" class="value-input-small" id="rotZValue" value="0" min="-180"
                                max="180">
                        </label>
                        <input type="range" class="slider" id="rotZ" min="-180" max="180" value="0">
                    </div>
                </section>

                <!-- Position & Scale -->
                <section class="section">
                    <h3 class="section-title">POSIÇÃO</h3>

                    <div class="control-row">
                        <label class="control-label">
                            <span class="resetable" data-reset="posX">X</span>
                            <input type="number" class="value-input-small" id="posXValue" value="50" min="0" max="100">
                        </label>
                        <input type="range" class="slider" id="posX" min="0" max="100" value="50">
                    </div>

                    <div class="control-row">
                        <label class="control-label">
                            <span class="resetable" data-reset="posY">Y</span>
                            <input type="number" class="value-input-small" id="posYValue" value="50" min="0" max="100">
                        </label>
                        <input type="range" class="slider" id="posY" min="0" max="100" value="50">
                    </div>

                    <div class="control-row">
                        <label class="control-label">
                            <span class="resetable" data-reset="scale">Escala</span>
                            <input type="number" class="value-input-small" id="scaleValue" value="100" min="10"
                                max="200">
                        </label>
                        <input type="range" class="slider" id="scale" min="10" max="200" value="100">
                    </div>
                </section>

                <!-- Background -->
                <section class="section">
                    <div class="attr-header">
                        <h3 class="section-title resetable" data-reset="bg">FUNDO</h3>
                    </div>

                    <div class="color-stops-container" id="bgStopsContainer">
                        <div class="color-stops" id="bgStops"></div>
                        <button class="add-stop-btn" id="addBgStop" title="Adicionar cor">+</button>
                    </div>
                    <div class="gradient-preview" id="bgGradientPreview"></div>

                    <div class="color-fade-controls hidden" id="bgAdvancedControls">
                        <div class="control-row bg-dir-row" style="justify-content: center; margin-bottom: 8px;">
                            <div class="bg-direction" id="bgDirectionContainer">
                                <button class="dir-btn active" data-dir="vertical" title="Vertical">↓</button>
                                <button class="dir-btn" data-dir="horizontal" title="Horizontal">→</button>
                                <button class="dir-btn" data-dir="radial" title="Radial">◎</button>
                            </div>
                        </div>

                        <div class="advanced-row">
                            <div class="control-group fade-group">
                                <span class="label">Fade</span>
                                <div class="dual-slider-mini">
                                    <input type="range" class="pos-slider-dual" id="bgFadeStart" min="0" max="100"
                                        value="0">
                                    <input type="range" class="pos-slider-dual" id="bgFadeEnd" min="0" max="100"
                                        value="100">
                                    <div class="slider-track"></div>
                                    <div class="slider-range" id="bgFadeRange"></div>
                                </div>
                            </div>
                            <div class="control-group">
                                <span class="label">Steps</span>
                                <input type="number" class="steps-input" id="bgSteps" value="100" min="1" max="100">
                            </div>
                        </div>
                    </div>

                    <div class="presets-section">
                        <div class="presets-header">
                            <span class="presets-label">Presets</span>
                            <button class="save-preset-btn" id="saveBgPreset" title="Guardar preset">💾</button>
                        </div>
                        <div class="color-presets" id="bgPresets"></div>
                    </div>
                </section>

                <!-- Layers -->
                <section class="section section-layers">
                    <div class="section-header">
                        <h3 class="section-title">LAYERS</h3>
                        <button class="add-layer-btn" id="addLayer">+</button>
                    </div>
                    <div class="layers-list" id="layersList"></div>
                </section>
            </div>
        </aside>

        <!-- Main Canvas Area -->
        <main class="canvas-container">
            <div class="toolbar">
                <div class="toolbar-left">
                    <div class="resolution-control">
                        <span>RES:</span>
                        <input type="number" class="res-input" id="resWidth" value="800">
                        <span>×</span>
                        <input type="number" class="res-input" id="resHeight" value="800">
                        <button class="res-apply" id="resApply" title="Aplicar Resolução">⏎</button>
                    </div>
                </div>
                <div class="toolbar-right">
                    <button class="tool-btn" id="resetBtn" title="Reset Tudo">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-8 3.58-8 8s3.58 8 8 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"
                                fill="currentColor" />
                        </svg>
                    </button>
                    <button class="tool-btn" id="randomBtn" title="Randomizar">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z"
                                fill="currentColor" />
                        </svg>
                    </button>
                    <div style="width: 1px; height: 16px; background: var(--border); margin: 0 4px;"></div>
                    <label class="tool-btn" title="Carregar JSON">
                        <svg viewBox="0 0 24 24">
                            <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z" fill="currentColor" />
                        </svg>
                        <input type="file" id="loadJson" accept=".json" style="display: none;">
                    </label>
                    <button class="tool-btn" id="saveJson" title="Guardar JSON">
                        <svg viewBox="0 0 24 24">
                            <path
                                d="M17 3H5c-1.11 0-2 .9-2 2v14c-1.1 0-2 .9-2 2h18c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"
                                fill="currentColor" />
                        </svg>
                    </button>
                    <button class="tool-btn export" id="exportPng" title="Exportar PNG">PNG</button>
                </div>
            </div>

            <div id="canvasWrapper">
                <div id="canvas"></div>
            </div>
        </main>

        <!-- Right Panel (Empty for now/Preserved) -->
        <aside class="right-panel">
            <div class="right-panel-content">
                <!-- Potential future controls -->
            </div>
        </aside>
    </div>

    <script src="app.js"></script>
</body>

</html>